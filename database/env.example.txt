# ================================================================
# BLOSSOM CAFÉ - Configuration Backend API
# ================================================================
# Copiez ce fichier en .env et remplissez avec vos valeurs

# Base de données MySQL
DB_HOST=127.0.0.1
DB_PORT=3306
DB_NAME=blossom_cafe
DB_USER=root
DB_PASSWORD=votre_mot_de_passe_mysql

# ✅ OPTIMISATION: Configuration du pool MySQL (optionnel)
# Limite de connexions simultanées (défaut: 35 en dev, 70 en prod)
# Adapté pour gérer 3-5 managers + clients simultanés + marge
# DB_CONNECTION_LIMIT=70
# Limite de file d'attente (défaut: 150 pour gérer les pics)
# DB_QUEUE_LIMIT=150
# Timeout pour acquérir une connexion en ms (défaut: 30s en prod, 60s en dev)
# DB_ACQUIRE_TIMEOUT=30000
# Timeout pour établir une connexion en ms (défaut: 5s en prod, 10s en dev)
# DB_CONNECT_TIMEOUT=5000
# Timeout pour les requêtes en ms (défaut: 60s en prod, 90s en dev)
# Augmenté pour gérer les requêtes complexes avec JSON_ARRAYAGG et dashboard
# DB_QUERY_TIMEOUT=60000
# Timeout pour fermer les connexions inactives en ms (défaut: 8h en prod, 4h en dev)
# DB_IDLE_TIMEOUT=28800000
# Délai entre les tentatives de reconnexion en ms (défaut: 2000)
# DB_RECONNECT_DELAY=2000
# Nombre maximum de tentatives de reconnexion (défaut: 10)
# DB_RECONNECT_MAX_ATTEMPTS=10

# Serveur API
PORT=5000
NODE_ENV=development

# JWT (JSON Web Tokens)
JWT_SECRET=votre_secret_jwt_super_securise_changez_moi_en_production
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# Session Secret
SESSION_SECRET=votre_secret_session_super_securise_changez_moi_en_production

# CORS - Origines autorisées (séparées par des virgules)
# ⚠️ En production, ne mettre QUE les domaines autorisés
# ⚠️ En développement, localhost est autorisé automatiquement
# Exemple: https://votre-domaine.com,https://www.votre-domaine.com
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# Paiement Stripe (optionnel)
STRIPE_PUBLIC_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...

# Paiement PayPal (optionnel)
PAYPAL_CLIENT_ID=...
PAYPAL_CLIENT_SECRET=...

# Email SMTP (optionnel)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=votre_email@gmail.com
SMTP_PASSWORD=votre_mot_de_passe_app

# Application
APP_NAME=Blossom Café
APP_URL=http://localhost:5173
FRONTEND_URL=http://localhost:5173

# Fichiers uploads (optionnel)
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=5242880

# Logs
# Niveaux possibles: debug, info, warn, error
# En production, utiliser 'info' ou 'warn' pour réduire les logs
# En développement, utiliser 'debug' pour voir tous les logs
LOG_LEVEL=debug

# Rate Limiting (protection DoS et force brute)
# Fenêtre de temps en millisecondes (défaut: 15 minutes = 900000)
RATE_LIMIT_WINDOW_MS=900000
# Nombre maximum de requêtes par fenêtre (défaut: 100)
RATE_LIMIT_MAX_REQUESTS=100

# ================================================================
# ⚠️ SÉCURITÉ DÉVELOPPEMENT - À UTILISER UNIQUEMENT EN DEV LOCAL
# ================================================================
# ⚠️ NE JAMAIS activer ces options en production !
# ⚠️ Le bypass dev permet de contourner l'authentification pour le développement local
# ⚠️ Il nécessite un header secret pour double sécurité
# ⚠️ Par défaut, le bypass est DÉSACTIVÉ même en développement pour plus de sécurité

# Activer le bypass dev (uniquement pour développement local)
# Valeurs possibles: 'true' ou 'false' (ou non défini = désactivé)
# ⚠️ Par défaut: false (désactivé) - Doit être explicitement activé
ALLOW_DEV_BYPASS=false

# Secret pour le bypass dev (changez cette valeur en développement)
# Ce secret doit être envoyé dans le header X-Dev-Bypass-Secret
# ⚠️ Si non défini, utilise 'CHANGEZ_MOI_EN_DEVELOPPEMENT' (à changer absolument)
DEV_BYPASS_SECRET=CHANGEZ_MOI_EN_DEVELOPPEMENT

